---
import BaseLayout from '../../layouts/BaseLayout.astro';
---
<BaseLayout
  title="Calculadora de costo por kilómetro"
  description="Calcula rendimiento y costo por km a partir de tus datos reales de combustible."
>
  <section class="wrap section">
    <div class="card">
      <h1>Calculadora de costo por kilómetro</h1>
      <p class="muted">Ingresa tus datos reales (galón ≈ 3.785 L). Los resultados se actualizan al instante.</p>

      <div class="form-grid">
        <div class="col-4">
          <label for="km">Kilómetros recorridos</label>
          <input id="km" type="number" inputmode="decimal" placeholder="e.g. 250" min="0" step="0.01" />
        </div>
        <div class="col-4">
          <label for="gal">Galones consumidos</label>
          <input id="gal" type="number" inputmode="decimal" placeholder="e.g. 6" min="0" step="0.001" />
        </div>
        <div class="col-4">
          <label for="ppg">Precio por galón (S/)</label>
          <input id="ppg" type="number" inputmode="decimal" placeholder="e.g. 15" min="0" step="0.01" />
        </div>

        <div class="col-12 row" style="margin-top: 6px;">
          <button class="btn-secondary" id="demo" type="button">Cargar ejemplo</button>
          <button class="btn-secondary" id="clear" type="button">Limpiar</button>
        </div>

        <div class="col-12">
          <div class="hr" role="presentation"></div>
        </div>

        <div class="col-12">
          <h2 style="margin: 0 0 8px; font-size: 18px;">Resultados (fase 1)</h2>
          <div class="stats" id="phase1">
            <div class="stat-card">
              <h3>km por galón</h3>
              <div class="val" id="kmPerGal">–</div>
            </div>
            <div class="stat-card">
              <h3>km por litro</h3>
              <div class="val" id="kmPerL">–</div>
            </div>
            <div class="stat-card">
              <h3>Consumo L/100 km</h3>
              <div class="val" id="lPer100">–</div>
            </div>
            <div class="stat-card">
              <h3>Costo por km</h3>
              <div class="val" id="costPerKm">–</div>
            </div>
          </div>
          <p class="muted" id="note1" style="margin-top: 6px;"></p>
        </div>

        <div class="col-12">
          <div class="hr" role="presentation"></div>
        </div>

        <div class="col-6">
          <h2 style="margin: 0 0 8px; font-size: 18px;">Calculadora de recorridos (fase 2)</h2>
          <label for="planKm">Kilómetros a recorrer</label>
          <input id="planKm" type="number" inputmode="decimal" placeholder="e.g. 25" min="0" step="0.01" />
          <div class="row" style="margin-top: 10px;">
            <button id="calcTrip" type="button">Calcular costo estimado</button>
            <span class="muted" id="tripHint">Primero completa la fase 1.</span>
          </div>
          <div class="stat-card" style="margin-top: 10px;">
            <h3>Costo estimado del viaje</h3>
            <div class="val" id="tripCost">–</div>
          </div>
        </div>

        <div class="col-6">
          <h2 style="margin: 0 0 8px; font-size: 18px;">Resumen</h2>
          <div class="stat-card" style="margin-bottom: 10px;">
            <h3>Precio por galón</h3>
            <div class="val" id="ppgOut">–</div>
          </div>
          <div class="stat-card">
            <h3>Rendimiento base</h3>
            <div class="val" id="rendBase">–</div>
          </div>
        </div>
      </div>

      <p class="footer-note" id="noteFooter">Web tools</p>
    </div>
  </section>

  <script src={Astro.resolve('../../scripts/combustible.js')} defer></script>
</BaseLayout>
